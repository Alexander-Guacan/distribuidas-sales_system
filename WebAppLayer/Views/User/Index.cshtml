@{
    ViewData["Title"] = "User Management";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="user-table mt-5">
    <h1>User Filter</h1>

    <div class="user-search">
        <h2>Search User by ID</h2>
        <form asp-action="Search" method="post">
            <div class="form-group">
                <label for="userId">User ID:</label>
                <input type="number" id="userId" name="id" class="form-control" required />
            </div>
            <button type="submit" class="btn btn-secondary">Search</button>
        </form>
        @if (ViewBag.User != null)
        {
            var user = ViewBag.User;
            <div class="user-details mt-4">
                <h3>User Details</h3>
                <p><strong>Name:</strong> @user.UserName</p>
                <p><strong>Email:</strong> @user.Email</p>
                <p><strong>Is Active:</strong> @(user.IsActive ? "Yes" : "No")</p>
                <p><strong>Last Login:</strong> @user.LastLogin?.ToString("g")</p>
            </div>
        }
    </div>
</div>

<div class="user-table mt-5">
    <h2>Manage Users</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Is Active</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model == null || Model.Count == 0)
            {
                <tr>
                    <td colspan="4" class="text-center">No users found</td>
                </tr>
            }
            else
            {
                foreach (var user in Model)
                {
                    <tr>
                        <td>@user.UserName</td>
                        <td>@user.Email</td>
                        <td>@(user.IsActive ? "Yes" : "No")</td>
                        <td>
                            <a asp-action="Edit" asp-route-id="@user.UserId" class="btn btn-warning btn-sm">Edit</a>
                            <a asp-action="Delete" asp-route-id="@user.UserId" class="btn btn-danger btn-sm">Delete</a>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

<div class="user-form mt-5">
    <h2>Add / Update User</h2>
    <form asp-action="Save" method="post">
        <input type="hidden" id="userId" name="User.UserId" value="@(ViewBag.User?.UserId ?? 0)" />
        <div class="form-group">
            <label for="userName">User Name:</label>
            <input type="text" id="userName" name="User.UserName" class="form-control" required />
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="User.Email" class="form-control" required />
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="User.Password" class="form-control" required />
        </div>
        <div class="form-group">
            <label for="isActive">Is Active:</label>
            <select id="isActive" name="User.IsActive" class="form-control">
                <option value="true">Yes</option>
                <option value="false">No</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>
</div>